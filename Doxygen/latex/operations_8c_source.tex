\doxysection{operations.\+c}
\label{operations_8c_source}\index{D:/Pedro Leiras/IPCA/EDJD 1ANO/S2/EDA/TP-\/EDA-\/21-\/22/Trabalho Pratico 18550/Trabalho Pratico 18550/operations.c@{D:/Pedro Leiras/IPCA/EDJD 1ANO/S2/EDA/TP-\/EDA-\/21-\/22/Trabalho Pratico 18550/Trabalho Pratico 18550/operations.c}}
\textbf{ Go to the documentation of this file.}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001 }
\DoxyCodeLine{00012 \textcolor{preprocessor}{\#include "{}header.h"{}}}
\DoxyCodeLine{00013 }
\DoxyCodeLine{00023 Operation* CreateOperation(\textcolor{keywordtype}{int} cod, MachinesList* m) \{}
\DoxyCodeLine{00024     Operation* aux = (Operation*)calloc(1, \textcolor{keyword}{sizeof}(Operation));}
\DoxyCodeLine{00025     aux-\/>cod = cod;}
\DoxyCodeLine{00026     aux-\/>machines = m;}
\DoxyCodeLine{00027 }
\DoxyCodeLine{00028     \textcolor{keywordflow}{return} aux;}
\DoxyCodeLine{00029 \}}
\DoxyCodeLine{00030 }
\DoxyCodeLine{00037 OperationsList* CreateOperationListNode(Operation* o) \{}
\DoxyCodeLine{00038     OperationsList* newNode = (OperationsList*)calloc(1, \textcolor{keyword}{sizeof}(OperationsList));}
\DoxyCodeLine{00039     newNode-\/>operation.cod = o-\/>cod;}
\DoxyCodeLine{00040     newNode-\/>operation.machines = o-\/>machines;}
\DoxyCodeLine{00041     newNode-\/>nextOperation = NULL;}
\DoxyCodeLine{00042 }
\DoxyCodeLine{00043     \textcolor{keywordflow}{return} newNode;}
\DoxyCodeLine{00044 \}}
\DoxyCodeLine{00045 }
\DoxyCodeLine{00051 OperationsList* InsertOperationInOperationsList(OperationsList* h, Operation* newOperation) \{}
\DoxyCodeLine{00052     \textcolor{keywordflow}{if} (newOperation == NULL) \{}
\DoxyCodeLine{00053         \textcolor{keywordflow}{return} h;}
\DoxyCodeLine{00054     \}}
\DoxyCodeLine{00055 }
\DoxyCodeLine{00056     OperationsList* aux = CreateOperationListNode(newOperation);}
\DoxyCodeLine{00057 }
\DoxyCodeLine{00058     \textcolor{keywordflow}{if} (CheckOperationExists(h, aux-\/>operation.cod)) \{}
\DoxyCodeLine{00059         \textcolor{keywordflow}{return} h;}
\DoxyCodeLine{00060     \}}
\DoxyCodeLine{00061 }
\DoxyCodeLine{00062     \textcolor{keywordflow}{if} (h == NULL) \{}
\DoxyCodeLine{00063         h = aux;}
\DoxyCodeLine{00064     \}\textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00065         OperationsList* tmp = h;}
\DoxyCodeLine{00066         \textcolor{keywordflow}{while} (tmp-\/>nextOperation != NULL) \{}
\DoxyCodeLine{00067             tmp = tmp-\/>nextOperation;}
\DoxyCodeLine{00068         \}}
\DoxyCodeLine{00069         tmp-\/>nextOperation = aux;}
\DoxyCodeLine{00070     \}}
\DoxyCodeLine{00071 }
\DoxyCodeLine{00072     \textcolor{keywordflow}{return} h;}
\DoxyCodeLine{00073 \}}
\DoxyCodeLine{00074 }
\DoxyCodeLine{00082 \textcolor{keywordtype}{bool} CheckOperationExists(OperationsList* h, \textcolor{keywordtype}{int} cod) \{}
\DoxyCodeLine{00083     \textcolor{keywordflow}{if} (h != NULL) \{}
\DoxyCodeLine{00084         OperationsList* aux = h;}
\DoxyCodeLine{00085         \textcolor{keywordflow}{while} (aux != NULL) \{}
\DoxyCodeLine{00086             \textcolor{keywordflow}{if} (aux-\/>operation.cod == cod) \{}
\DoxyCodeLine{00087                 \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00088             \}}
\DoxyCodeLine{00089             aux = aux-\/>nextOperation;}
\DoxyCodeLine{00090         \}}
\DoxyCodeLine{00091     \}}
\DoxyCodeLine{00092 }
\DoxyCodeLine{00093     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00094 \}}
\DoxyCodeLine{00095 }
\DoxyCodeLine{00102 Operation* SearchOperation(OperationsList* h, \textcolor{keywordtype}{int} cod) \{}
\DoxyCodeLine{00103     \textcolor{keywordflow}{if} (h != NULL) \{}
\DoxyCodeLine{00104         OperationsList* aux = h;}
\DoxyCodeLine{00105         \textcolor{keywordflow}{while} (aux != NULL) \{}
\DoxyCodeLine{00106             \textcolor{keywordflow}{if} (aux-\/>operation.cod == cod) \{}
\DoxyCodeLine{00107                 \textcolor{keywordflow}{return} (aux);}
\DoxyCodeLine{00108             \}}
\DoxyCodeLine{00109             aux = aux-\/>nextOperation;}
\DoxyCodeLine{00110         \}}
\DoxyCodeLine{00111     \}}
\DoxyCodeLine{00112 }
\DoxyCodeLine{00113     \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{00114 \}}
\DoxyCodeLine{00115 }
\DoxyCodeLine{00123 \textcolor{keywordtype}{float} GetAverageOperationTime(ProcessPlan* h, \textcolor{keywordtype}{int} jobCod, \textcolor{keywordtype}{int} opCod) \{}
\DoxyCodeLine{00124     \textcolor{keywordtype}{int} sum = 0, i = 0;}
\DoxyCodeLine{00125     \textcolor{keywordtype}{float} res = -\/1;}
\DoxyCodeLine{00126 }
\DoxyCodeLine{00127     \textcolor{keywordflow}{if} (h != NULL) \{}
\DoxyCodeLine{00128         Job* job = SearchJob(h, jobCod);}
\DoxyCodeLine{00129         \textcolor{keywordflow}{if} (job != NULL \&\& job-\/>operations != NULL) \{}
\DoxyCodeLine{00130             Operation* auxOperation = SearchOperation(job-\/>operations, opCod);}
\DoxyCodeLine{00131             \textcolor{keywordflow}{if} (auxOperation != NULL) \{}
\DoxyCodeLine{00132                 MachinesList* auxMachines = auxOperation-\/>machines;}
\DoxyCodeLine{00133                 sum = SumMachineTime(auxMachines);}
\DoxyCodeLine{00134                 i = CountMachines(auxMachines);}
\DoxyCodeLine{00135                 \textcolor{keywordflow}{if} (i != 0) \{}
\DoxyCodeLine{00136                     res = sum / (float)i;}
\DoxyCodeLine{00137                 \}}
\DoxyCodeLine{00138             \}}
\DoxyCodeLine{00139         \}}
\DoxyCodeLine{00140     \}}
\DoxyCodeLine{00141 }
\DoxyCodeLine{00142     \textcolor{keywordflow}{return} res;}
\DoxyCodeLine{00143 \}}
\DoxyCodeLine{00144 }
\DoxyCodeLine{00155 ProcessPlan* ChangeOperationInJob(ProcessPlan* h, \textcolor{keywordtype}{int} jobCod, \textcolor{keywordtype}{int} opCod, \textcolor{keywordtype}{int} macCod, \textcolor{keywordtype}{int} newMacCod, \textcolor{keywordtype}{int} newTime) \{}
\DoxyCodeLine{00156     \textcolor{keywordflow}{if} (h != NULL) \{}
\DoxyCodeLine{00157         Job* job = SearchJob(h, jobCod);}
\DoxyCodeLine{00158         \textcolor{keywordflow}{if} (job != NULL \&\& job-\/>operations != NULL) \{}
\DoxyCodeLine{00159             Operation* auxOperation = SearchOperation(job-\/>operations, opCod);}
\DoxyCodeLine{00160             \textcolor{keywordflow}{if} (auxOperation != NULL) \{}
\DoxyCodeLine{00161                 Machine* auxMachine = SearchMachine(auxOperation-\/>machines, macCod);}
\DoxyCodeLine{00162                 auxMachine = ChangeMachine(auxMachine, newMacCod, newTime);}
\DoxyCodeLine{00163             \}}
\DoxyCodeLine{00164         \}}
\DoxyCodeLine{00165     \}}
\DoxyCodeLine{00166 }
\DoxyCodeLine{00167     \textcolor{keywordflow}{return} h;}
\DoxyCodeLine{00168 \}}
\DoxyCodeLine{00169 }
\DoxyCodeLine{00175 OperationsMath GetMinTimeToCompleteOperations(OperationsList* h) \{}
\DoxyCodeLine{00176     OperationsMath x = \{ 0, NULL \};}
\DoxyCodeLine{00177     Machine* auxMachine;}
\DoxyCodeLine{00178     MachinesList* auxMachineList;}
\DoxyCodeLine{00179     Operation* auxOperation;}
\DoxyCodeLine{00180 }
\DoxyCodeLine{00181     \textcolor{keywordflow}{while} (h != NULL) \{}
\DoxyCodeLine{00182         auxMachineList = NULL;}
\DoxyCodeLine{00183         auxMachine = GetMachineWithLowerTime(h-\/>operation.machines);                            \textcolor{comment}{//obtem a struct da maquina com menor tempo da operacao iterada}}
\DoxyCodeLine{00184         \textcolor{keywordflow}{if} (auxMachine != NULL) \{}
\DoxyCodeLine{00185             x.res += auxMachine-\/>time;                                                           \textcolor{comment}{//vai somando o tempo minimo de todas as maquinas}}
\DoxyCodeLine{00186             auxMachineList = InsertMachineInMachinesList(auxMachineList, auxMachine);            \textcolor{comment}{//cria uma lista de maquinas com a maquina de menor tempo}}
\DoxyCodeLine{00187             auxOperation = CreateOperation(h-\/>operation.cod, auxMachineList);                    \textcolor{comment}{//cria a operacao}}
\DoxyCodeLine{00188             x.operations = InsertOperationInOperationsList(x.operations, auxOperation);          \textcolor{comment}{//insere a operacao criada na lista de operacoes a retornar}}
\DoxyCodeLine{00189         \}}
\DoxyCodeLine{00190         h = h-\/>nextOperation;}
\DoxyCodeLine{00191     \}}
\DoxyCodeLine{00192 }
\DoxyCodeLine{00193     \textcolor{keywordflow}{return} x;}
\DoxyCodeLine{00194 \}}
\DoxyCodeLine{00195 }
\DoxyCodeLine{00201 OperationsMath GetMaxTimeToCompleteOperations(OperationsList* h) \{}
\DoxyCodeLine{00202     OperationsMath x = \{ 0, NULL \};}
\DoxyCodeLine{00203     Machine* auxMachine;}
\DoxyCodeLine{00204     MachinesList* auxMachineList;}
\DoxyCodeLine{00205     Operation* auxOperation;}
\DoxyCodeLine{00206 }
\DoxyCodeLine{00207     \textcolor{keywordflow}{while} (h != NULL) \{}
\DoxyCodeLine{00208         auxMachineList = NULL;}
\DoxyCodeLine{00209         auxMachine = GetMachineWithHigherTime(h-\/>operation.machines);                          \textcolor{comment}{//obtem a struct da maquina com maior tempo da operacao iterada}}
\DoxyCodeLine{00210         \textcolor{keywordflow}{if} (auxMachine != NULL) \{}
\DoxyCodeLine{00211             x.res += auxMachine-\/>time;                                                           \textcolor{comment}{//vai somando o maior tempo de todas as maquinas}}
\DoxyCodeLine{00212             auxMachineList = InsertMachineInMachinesList(auxMachineList, auxMachine);            \textcolor{comment}{//cria uma lista de maquinas com a maquina de maior tempo}}
\DoxyCodeLine{00213             auxOperation = CreateOperation(h-\/>operation.cod, auxMachineList);                    \textcolor{comment}{//cria a operacao}}
\DoxyCodeLine{00214             x.operations = InsertOperationInOperationsList(x.operations, auxOperation);          \textcolor{comment}{//insere a operacao criada na lista de operacoes a retornar}}
\DoxyCodeLine{00215         \}}
\DoxyCodeLine{00216         h = h-\/>nextOperation;}
\DoxyCodeLine{00217     \}}
\DoxyCodeLine{00218 }
\DoxyCodeLine{00219     \textcolor{keywordflow}{return} x;}
\DoxyCodeLine{00220 \}}
\DoxyCodeLine{00221 }
\DoxyCodeLine{00226 \textcolor{keywordtype}{void} ListOperations(OperationsList* h) \{}
\DoxyCodeLine{00227     \textcolor{keywordflow}{if} (h != NULL) \{}
\DoxyCodeLine{00228         printf(\textcolor{stringliteral}{"{}Codigo Operacao: \%d -\/ Maquinas: \(\backslash\)n"{}}, h-\/>operation.cod);}
\DoxyCodeLine{00229         ListMachines(h-\/>operation.machines);}
\DoxyCodeLine{00230         \textcolor{keywordflow}{while} (h-\/>nextOperation != NULL) \{}
\DoxyCodeLine{00231             h = h-\/>nextOperation;}
\DoxyCodeLine{00232             printf(\textcolor{stringliteral}{"{}Codigo Operacao: \%d -\/ Maquinas: \(\backslash\)n"{}}, h-\/>operation.cod);}
\DoxyCodeLine{00233             ListMachines(h-\/>operation.machines);   }
\DoxyCodeLine{00234         \};}
\DoxyCodeLine{00235     \}}
\DoxyCodeLine{00236 \}}

\end{DoxyCode}
